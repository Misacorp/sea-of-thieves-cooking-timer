(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(21),i=t.n(o),c=(t(61),t(1)),u=t(48),l=t.n(u),s=["Roboto","Arial","sans-serif"],m={palette:{primary:{main:"#efd71f",light:"#fff8bf",dark:"#59563d"},secondary:{main:"#FFE2BC",light:"#FFF9F0",dark:"#C79349"},success:{main:"#319F4A",light:"#55D370",dark:"#257134"},error:{main:"#D34E41",light:"#FF7365",dark:"#953930"},disabled:{main:"#7A7A7A"},typography:{light:"#FFFFFF",dark:"#020202"}},typography:{base:{fontFamily:s.join(",")},title:{fontFamily:["Montserrat"].concat(s).join(",")}},emoji:"\ud83e\udd65",transition:{duration:"0.2s",timingFunction:"ease-out"},appDrawer:{width:{mobile:{open:"90vw",closed:"0"},desktop:{open:"240px",closed:"0"}}}},f=t(2);function d(){var e=Object(f.a)(["\n  body {\n    font-family: ",";\n    color: ",";\n    background-color: #1A1A1A;\n  }\n\n  h1, h2, h3, h4, h5, h6 {\n    font-family: ",";\n    font-weight: 600;\n\n    svg {\n      vertical-align: middle;\n      margin-right: 0.3em;\n      margin-top: -0.5%;\n    }\n  }\n\n  h1, h2 {\n    font-weight: 700;\n  }\n\n  h3 {\n    color: ","\n  }\n"]);return d=function(){return e},e}var E=Object(c.createGlobalStyle)(d(),function(e){return e.theme.typography.base.fontFamily},function(e){return e.theme.palette.typography.light},function(e){return e.theme.typography.title.fontFamily},function(e){return e.theme.palette.primary.dark}),p=t(3),h=t(51),b=Object(r.createContext)(null),v=t(52),g=t.n(v),O=t(7),N=t.n(O),k=new(t(106).a),j=function(e,n){return k.next({topic:e,data:n})},y=k,S=function(){return g()("https://sea-of-thieves-cooking-timer.herokuapp.com")};function R(){var e=Object(f.a)(["\n  height: 50px;\n  background-color: ",";\n  color: black;\n\n  h1 {\n    margin: 0;\n    padding: 0.5rem 0.25rem;\n    text-align: center;\n  }\n"]);return R=function(){return e},e}var T=Object(c.default)(function(e){var n=e.className;return a.a.createElement("div",{className:n},a.a.createElement("h1",null,"Cooking Timer"))})(R(),function(e){return e.theme.palette.primary.main}),C=t(4),w=(t(97),t(24));function I(){var e=Object(f.a)(["\n  /* Reset button styles */\n  border: none;\n  font: inherit;\n  cursor: pointer;\n\n  display: ","\n  background-color: ",";\n  color: ",";\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n  margin-left: ","\n  margin-right: ","\n  padding: 0.5rem 1rem;\n\n  border-radius: 3rem;\n  text-transform: uppercase;\n\n  &:disabled {\n    background-color: ",";\n  }\n"]);return I=function(){return e},e}var M=Object(c.default)(function(e){var n=e.onClick,t=e.children,r=e.className,o=(e.variant,Object(w.a)(e,["onClick","children","className","variant"]));return a.a.createElement("button",Object.assign({type:"button",onClick:n,className:r},o),t)})(I(),function(e){return"inline"===e.variant?"inline-block":"block"},function(e){return e.theme.palette.primary.main},function(e){return e.theme.palette.typography.dark},function(e){return"inline"===e.variant?"0.5rem":"auto"},function(e){return"inline"===e.variant?"0.5rem":"auto"},function(e){return e.theme.palette.disabled.main});function _(){var e=Object(f.a)(["\n  position: relative;\n  text-align: center;\n"]);return _=function(){return e},e}function F(){var e=Object(f.a)(["\n  display: inline-block;\n  background-color: #7a7a7a;\n  padding: 0.25rem 0.5rem;\n  color: ",";\n  font-size: 0.75rem;\n  font-weight: bold;\n\n  ::before {\n    content: '';\n    height: 1px;\n    width: 100%;\n    background-color: #7a7a7a;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    z-index: -1;\n  }\n"]);return F=function(){return e},e}var A=c.default.p(F(),function(e){return e.theme.palette.typography.dark}),L=Object(c.default)(function(e){var n=e.className,t=e.children;return a.a.createElement("div",{className:n},a.a.createElement(A,null,t))})(_());function x(){var e=Object(f.a)(["\n  background-color: white;\n  border: none;\n  padding: 1rem;\n  font-size: 1rem;\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n  margin-left: ","\n  margin-right: ","\n  display: ","\n"]);return x=function(){return e},e}var D=c.default.input(x(),function(e){return"inline"===e.variant?"0.5rem":"auto"},function(e){return"inline"===e.variant?"0.5rem":"auto"},function(e){return"inline"===e.variant?"inline-block":"block"}),U=function(){var e=Object(r.useContext)(b).connection.socket;return{start:function(n,t){return function(){e.emit("START",{id:n,food:t})}},reset:function(n){return function(){e.emit("RESET",{id:n})}},createRoom:function(n){e?e.emit("CREATE_ROOM",{nickname:n}):console.log("No socket!",e)},joinRoom:function(n,t){e.emit("JOIN_ROOM",{roomCode:n,nickname:t})},requestTimers:function(){e.emit("REQUEST_TIMERS")}}},G=t(105),P=function(e){var n=Object(r.useRef)();return Object(r.useEffect)(function(){var t=Object.keys(e);return n.current=y.pipe(Object(G.a)(function(e){var n=e.topic;return t.includes(n)})).subscribe(function(n){var t=n.topic,r=n.data;e[t](r)}),function(){n.current.unsubscribe()}},[e]),n};function B(){var e=Object(f.a)([""]);return B=function(){return e},e}var J=Object(c.default)(function(e){var n,t=e.className,o=Object(r.useContext)(b).dispatch,i=Object(r.useRef)((n={},Object(C.a)(n,"ROOM_CREATED",function(e){o({type:"ONLINE",roomCode:e})}),Object(C.a)(n,"USER_JOINED",function(e){var n=e.roomCode;o({type:"ONLINE",roomCode:n})}),n));P(i.current);var c=Object(r.useState)(""),u=Object(p.a)(c,2),l=u[0],s=u[1],m=function(){return"string"===typeof l&&l.length>=3&&l.length<=32},f=Object(r.useState)(""),d=Object(p.a)(f,2),E=d[0],h=d[1],v=function(){return 4===E.length},g=U(),O=g.createRoom,N=g.joinRoom;return a.a.createElement("div",{className:t},a.a.createElement(D,{type:"text",onChange:function(e){var n=e.target.value;s(n)},value:l,placeholder:"My name is...","aria-label":"Nickname","aria-required":"true",style:{marginBottom:"4rem"}}),m()&&a.a.createElement(a.a.Fragment,null,a.a.createElement(M,{variant:"main",onClick:function(){m()&&O(l)},disabled:!m()},"Create room"),a.a.createElement(L,null,"OR"),a.a.createElement(D,{type:"text",onChange:function(e){var n=e.target.value;n.length<=4&&(n=n.toUpperCase(),h(n))},value:E,placeholder:"Room code","aria-label":"Room code"}),a.a.createElement(M,{variant:"main",onClick:function(){m()&&v()&&N(E,l)},disabled:!v()},"Join room")))})(B()),Y=function(){var e=Object(r.useContext)(b).dispatch,n=Object(r.useState)("ONLINE_SELECT"),t=Object(p.a)(n,2),o=t[0],i=t[1];return a.a.createElement(a.a.Fragment,null,"ONLINE_SELECT"===o&&a.a.createElement(a.a.Fragment,null,a.a.createElement(M,{onClick:function(){e({type:"OFFLINE"})}},"Offline"),a.a.createElement(M,{onClick:function(){e({type:"ONLINE_SETUP"}),i("ROOM_SELECT")}},"Online")),"ROOM_SELECT"===o&&a.a.createElement(a.a.Fragment,null,a.a.createElement(J,null)))};function H(){var e=Object(f.a)(["\n  height: 30px;\n  background-color: #efd71f;\n  color: black;\n\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  text-align: center;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return H=function(){return e},e}var W=Object(c.default)(function(e){var n=e.className;return a.a.createElement("div",{className:n},a.a.createElement("div",null,"App Controls here"))})(H()),z=t(54);function X(){var e=Object(f.a)(["\n  background-color: white;\n  display: inline-flex;\n  padding: 0.5rem 1rem;\n  border-radius: 1rem;\n  color: ",";\n  margin: 0.15rem;\n  animation: "," 1s ease-out 6s 1 forwards;\n"]);return X=function(){return e},e}function q(){var e=Object(f.a)(["\n  from {\n    opacity: 1;\n  }\n\n  to {\n    opacity: 0;\n  }\n"]);return q=function(){return e},e}function Q(){var e=Object(f.a)(["\n  padding-right: 0.5rem;\n  color: #9f9f9f;\n"]);return Q=function(){return e},e}var K=c.default.span(Q()),$=Object(c.keyframes)(q()),V=Object(c.default)(function(e){var n=e.className,t=e.timestamp,r=e.children,o=new Date(t);return a.a.createElement("p",{className:n},a.a.createElement(K,null,"".concat(o.getHours(),":").concat(o.getMinutes())),a.a.createElement("span",null,r))})(X(),function(e){return e.theme.palette.typography.dark},$),Z={USER_JOINED:function(e){var n=e.nickname;return"".concat(n," joined")},MEMBER_LIST:function(e){var n=e.members.join(", ");return"Current members: ".concat(n)},USER_LEFT:function(e){var n=e.nickname;return"".concat(n," left")},NONEXISTANT_ROOM:function(e){var n=e.roomCode;return"Room ".concat(n," doesn't exist")},TIMER_SYNC:function(e){return e.message},GENERIC_MESSAGE:function(e){return e.message}},ee=Z,ne=t(13),te=function e(n){var t=n.id,r=n.timestamp,a=n.content;Object(ne.a)(this,e),this.id=t,this.timestamp=r,this.content=a};function re(){var e=Object(f.a)(["\n  position: absolute;\n  bottom: 2.5rem;\n  left: 0.25rem;\n  right: 0.25rem;\n  text-align: right;\n  z-index: 999;\n  user-select: none;\n  pointer-events: none;\n\n  & span {\n    text-align: left;\n  }\n"]);return re=function(){return e},e}var ae=Object(c.default)(function(e){var n,t=e.className,o=Object(r.useState)([]),i=Object(p.a)(o,2),c=i[0],u=i[1],l=function(e){var n=e.id,t=e.type,r=e.timestamp,a=Object(w.a)(e,["id","type","timestamp"]),o=ee[t](a),i=new te({id:n,timestamp:r,content:o});u(function(e){return[].concat(Object(z.a)(e),[i])})},s=Object(r.useRef)((n={},Object(C.a)(n,"USER_JOINED",function(e){l(e)}),Object(C.a)(n,"USER_LEFT",function(e){l(e)}),Object(C.a)(n,"MEMBER_LIST",function(e){l(e)}),Object(C.a)(n,"NONEXISTANT_ROOM",function(e){l(e)}),Object(C.a)(n,"TIMER_SYNC",function(e){e.message&&l(e)}),Object(C.a)(n,"GENERIC_MESSAGE",function(e){l(e)}),n));return P(s.current),a.a.createElement("div",{className:t},c.slice(-7).map(function(e){return a.a.createElement(V,{key:"".concat(e.id),timestamp:e.timestamp},e.content)}))})(re()),oe=t(22),ie=t.n(oe);function ce(){var e=Object(f.a)(["\n  width: calc(100vw - 1rem);\n  height: calc(100vw - 1rem);\n  margin: 0.5rem;\n"]);return ce=function(){return e},e}function ue(){var e=Object(f.a)(["\n    50%   50%\n50% A     B\n50% C     D\n"]);return ue=function(){return e},e}var le=ie()(ue()),se=Object(c.default)(le)(ce()),me=function(e){var n=e.food,t=e.timeLeft,r=e.className;return a.a.createElement("div",{className:r},a.a.createElement("p",null,n," is cooking"),a.a.createElement("h2",null,t))};function fe(){var e=Object(f.a)(["\n  padding: 1rem;\n  background-color: ",";\n"]);return fe=function(){return e},e}var de=c.default.button(fe(),function(e){return e.theme.palette.primary.main}),Ee=function(e){var n=e.reset,t=e.className;return a.a.createElement("div",{className:t},a.a.createElement("p",null,"Timer has stopped"),a.a.createElement(de,{type:"button",onClick:n},"OK"))};function pe(){var e=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n"]);return pe=function(){return e},e}function he(){var e=Object(f.a)(["\n    50% 50%\n50% A   B\n50% C   D\n"]);return he=function(){return e},e}var be=ie()(he()),ve=Object(c.default)(be)(pe());function ge(){var e=Object(f.a)(["\n  position: relative;\n  margin: 0;\n  padding: 0rem;\n  border: none;\n  font: inherit;\n  color: inherit;\n  background-color: transparent;\n  /* show a hand cursor on hover; some argue that we\n  should keep the default arrow cursor for buttons */\n  cursor: pointer;\n\n  background-color: ",";\n  color: ",";\n\n  width: calc(100% - 6px);\n  height: calc(100% - 6px);\n  margin: 3px;\n"]);return ge=function(){return e},e}var Oe=Object(c.default)(function(e){var n=e.onClick,t=e.children,r=e.className;return a.a.createElement("button",{type:"button",onClick:n,className:r},t)})(ge(),function(e){return e.theme.palette.primary.main},function(e){return e.theme.palette.typography.dark}),Ne=function(e){var n=e.start,t=e.className;return a.a.createElement(ve,{className:t},a.a.createElement(Oe,{onClick:n("FISH")},"Fish"),a.a.createElement(Oe,{onClick:n("TROPHY_FISH")},"Trophy Fish"),a.a.createElement(Oe,{onClick:n("MEAT")},"Meat"),a.a.createElement(Oe,{onClick:n("MONSTER_MEAT")},"Monster meat"))},ke=t(53),je=t.n(ke);function ye(){var e=Object(f.a)(["\n  height: calc(100% - 0.5rem);\n  width: calc(100% - 0.5rem);\n  padding: 0.1rem;\n  margin: 0.25rem;\n  background-color: ",";\n\n  text-align: center;\n"]);return ye=function(){return e},e}var Se=Object(c.default)(function(e){var n=e.id,t=e.startDate,o=e.state,i=e.duration,c=e.foodName,u=e.className,l=U(),s=l.start,m=l.reset,f=Object(r.useState)(!1),d=Object(p.a)(f,2),E=d[0],h=d[1];Object(r.useEffect)(function(){h(!1)},[t]);var b=function(){var e=new Date,n=new Date(t),r=i-(e-n)/1e3;return Math.max(0,Math.round(r))}();return b<=0&&!E&&(new Audio(je.a).play(),h(!0)),"RUNNING"===o&&b>0?a.a.createElement(me,{food:c,timeLeft:b,className:u}):"STOPPED"===o||b<=0&&"RUNNING"===o?a.a.createElement(Ee,{reset:m(n),className:u}):"SELECT"===o?a.a.createElement(Ne,{start:function(e){return s(n,e)},className:u}):a.a.createElement("p",null,"Unknown state")})(ye(),function(e){return e.theme.palette.primary.dark}),Re=function(){var e=Object(r.useState)([]),n=Object(p.a)(e,2),t=n[0],o=n[1],i=t.length,c=Object(r.useRef)(Object(C.a)({},"TIMER_SYNC",function(e){o(e.timers)}));P(c.current);var u=Object(r.useState)(new Date),l=Object(p.a)(u,2)[1],s=U().requestTimers;return Object(r.useEffect)(function(){var e=setInterval(function(){l(new Date)},200);return i<1&&s(),function(){clearInterval(e)}},[i,s]),4!==t.length?a.a.createElement("p",null,"No timers"):a.a.createElement(se,null,t.map(function(e){return a.a.createElement(Se,{key:e.id,id:e.id,startDate:e.startDate,duration:e.duration,foodName:e.foodName,state:e.state})}))};function Te(){var e=Object(f.a)(["\n  text-align: center;\n"]);return Te=function(){return e},e}var Ce,we=Object(c.default)(function(e){var n=e.className,t=Object(r.useContext)(b).connection.roomCode;return a.a.createElement("p",{className:n},"Room ",t)})(Te()),Ie=t(23),Me=function(){function e(n){Object(ne.a)(this,e),this.code=n,this.members={},this.timers=[]}return Object(Ie.a)(e,[{key:"getMemberNames",value:function(){var e=this;return Object.keys(this.members).map(function(n){return e.members[n].nickname})}},{key:"getMemberById",value:function(e){return this.members[e]}},{key:"addMember",value:function(e){this.members[e.id]=e}},{key:"addTimer",value:function(e){this.timers.push(e)}},{key:"getTimer",value:function(e){for(var n=this.timers.length,t=0;t<n;t+=1){var r=this.timers[t];if(r.id===e)return r}throw new Error("Could not find timer with id ".concat(e))}}]),e}(),_e={FISH:{name:"Fish",duration:40},TROPHY_FISH:{name:"Trophy Fish",duration:90},MEAT:{name:"Meat",duration:60},MONSTER_MEAT:{name:"Monster Meat",duration:120}},Fe=function(){function e(n){Object(ne.a)(this,e),this.id=n,this.state="SELECT",this.startDate,this.duration}return Object(Ie.a)(e,[{key:"start",value:function(e){if(Object.keys(_e).includes(e))return this.state="RUNNING",this.startDate=(new Date).toString(),this.duration=_e[e].duration,this.foodName=_e[e].name,this;throw new TypeError("Cannot start a timer with food ".concat(e))}},{key:"reset",value:function(){this.state="SELECT"}}]),e}(),Ae=function(){j("TIMER_SYNC",{type:"TIMER_SYNC",id:N()(),timestamp:(new Date).toString(),timers:Ce.timers})},Le={init:function(){Ce=new Me("LOCL"),function(e){for(var n=0;n<e;n+=1)Ce.addTimer(new Fe(N()()))}(4),j("ROOM_CREATED","LOCL")},on:function(e,n){return console.log("fakeSocket on:",e,n)},emit:function(e,n){switch(e){case"REQUEST_TIMERS":Ae();break;case"START":var t=n.id,r=n.food;Ce.getTimer(t).start(r),Ae();break;case"RESET":var a=n.id;Ce.getTimer(a).reset(),Ae();break;default:j("GENERIC_MESSAGE",{type:"GENERIC_MESSAGE",id:N()(),timestamp:(new Date).toString(),message:"fakeSocket has no handler for your action. ".concat(e)})}}},xe={state:"SETUP",socket:null,roomCode:void 0},De=function(){var e=Object(r.useRef)(),n=Object(r.useCallback)(function(n,t){switch(t.type){case"SETUP":return{state:"SETUP",socket:null};case"OFFLINE":return Le.init(),void 0===e.current&&(e.current=Le),{state:"OFFLINE",socket:e.current};case"ONLINE_SETUP":return void 0===e.current&&(e.current=S(),function(e){e.on("USER_JOINED",function(e){var n=e.nickname,t=e.timestamp,r=e.roomCode;j("USER_JOINED",{type:"USER_JOINED",id:N()(),nickname:n,timestamp:t,roomCode:r})}),e.on("MEMBER_LIST",function(e){var n=e.timestamp,t=e.members;j("MEMBER_LIST",{type:"MEMBER_LIST",id:N()(),timestamp:n,members:t})}),e.on("USER_LEFT",function(e){var n=e.nickname,t=e.timestamp;j("USER_LEFT",{type:"USER_LEFT",id:N()(),nickname:n,timestamp:t})}),e.on("ROOM_CREATED",function(e){var n=e.roomCode;j("ROOM_CREATED",n)}),e.on("NONEXISTANT_ROOM",function(e){var n=e.roomCode,t=e.timestamp;j("NONEXISTANT_ROOM",{type:"NONEXISTANT_ROOM",id:N()(),roomCode:n,timestamp:t})}),e.on("TIMER_SYNC",function(e){var n=e.timers,t=e.message;j("TIMER_SYNC",{type:"TIMER_SYNC",id:N()(),timestamp:(new Date).toString(),timers:n,message:t})}),e.on("GENERIC_MESSAGE",function(e){var n=e.message;j("GENERIC_MESSAGE",{type:"GENERIC_MESSAGE",id:N()(),timestamp:(new Date).toString(),message:n})})}(e.current)),{state:"ONLINE_SETUP",socket:e.current};case"ONLINE":return Object(h.a)({},n,{state:"ONLINE",roomCode:t.roomCode});default:throw new Error("Action of type ".concat(t?t.type:"(action is undefined)"," is not supported }"))}},[e]),t=Object(r.useReducer)(n,xe),o=Object(p.a)(t,2),i=o[0],c={connection:i,dispatch:o[1]},u=i.state,l=a.a.createElement(Re,null),s=a.a.createElement(a.a.Fragment,null,a.a.createElement(we,null),a.a.createElement(Re,null));return a.a.createElement(b.Provider,{value:c},a.a.createElement(T,null),("SETUP"===u||"ONLINE_SETUP"===u)&&a.a.createElement(Y,null),"OFFLINE"===u&&l,"ONLINE"===u&&s,a.a.createElement(ae,null),a.a.createElement(W,null))};l.a.load({google:{families:["Montserrat:500,600,800","serif"]}});var Ue=function(){return a.a.createElement(c.ThemeProvider,{theme:m},a.a.createElement(a.a.Fragment,null,a.a.createElement(E,null),a.a.createElement(De,null)))},Ge=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Pe(e,n){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(a.a.createElement(Ue,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/sea-of-thieves-cooking-timer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var n="".concat("/sea-of-thieves-cooking-timer","/service-worker.js");Ge?(function(e,n){fetch(e).then(function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Pe(e,n)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(n,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Pe(n,e)})}}()},53:function(e,n,t){e.exports=t.p+"static/media/annoying-vuvuzela-tone.7c0e3fdb.mp3"},56:function(e,n,t){e.exports=t(102)},61:function(e,n,t){},92:function(e,n){}},[[56,1,2]]]);
//# sourceMappingURL=main.f754a658.chunk.js.map